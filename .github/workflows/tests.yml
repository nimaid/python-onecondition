name: Codecov
run-name:  Run Codecov (${{ github.actor }})
on:
  push:
    branches:
      - main
jobs:
  Run-Tests:
    name: Run Tests
    runs-on: ubuntu-latest
    permissions:
      id-token: write
    steps:
      - run: echo "This job was automatically triggered by a ${{ github.event_name }} event."
      - run: echo "Running on a ${{ runner.os }} server."
      - name: Checkout ${{ github.repository }}
        uses: actions/checkout@v4
      - name: Install Python Tools
        run: python3 -m pip install coverage
      - name: Install Local Package
        run: python3 -m pip install -e .
      - name: Run Coverage and Unit Tests
        run: coverage run -m unittest discover tests
      - name: Upload coverage reports to Codecov
        uses: codecov/codecov-action@v3
        env:
          CODECOV_TOKEN: ${{ secrets.CODECOV_TOKEN }}
      - name: Coveralls
        uses: coverallsapp/github-action@v2
